<!DOCTYPE html>
<html>
<head>
  <title>Police Dashboard</title>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>
</head>
<body>

<h2>ðŸ‘® Police Control Room</h2>

<p id="ambulanceTrack">Tracking...</p>

<script>

const supabase = supabase.createClient(
  "https://inlkqessbewmxmtfvzfe.supabase.co",
  "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImlubGtxZXNzYmV3bXhtdGZ2emZlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjkwNjgxODYsImV4cCI6MjA4NDY0NDE4Nn0.5qiSgu3WlXJW4ARwwLC5XV6zvMwfGdH_xtUlu_qat0I"
);

// Listen ambulance updates
supabase
  .channel("police-track")
  .on(
    "postgres_changes",
    { event: "UPDATE", schema: "public", table: "ambulances" },
    payload => {

      document.getElementById("ambulanceTrack").innerText =
        "Ambulance ID: " + payload.new.id +
        "\nLocation: " + payload.new.latitude +
        ", " + payload.new.longitude +
        "\nStatus: " + payload.new.status;

    }
  )
  .subscribe();

</script>

</body>
</html>
