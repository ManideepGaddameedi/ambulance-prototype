<!DOCTYPE html>
<html>
<head>
  <title>Ambulance GPS Sender</title>
  <style>
    body {
      font-family: Arial;
      text-align: center;
      margin-top: 40px;
    }
    button {
      padding: 12px 20px;
      font-size: 16px;
    }
  </style>
</head>
<body>

<h2>ðŸš‘ Ambulance Live GPS</h2>
<p id="status">Waiting for GPS...</p>

<button onclick="startTracking()">Start Sending Location</button>

<!-- Supabase -->
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>

<script>
  // ðŸ”¹ Supabase config
  const supabaseUrl = "https://YOUR_PROJECT_ID.supabase.co";
  const supabaseKey = "YOUR_ANON_PUBLIC_KEY";
  const supabase = supabase.createClient(supabaseUrl, supabaseKey);

  function startTracking() {
    if (!navigator.geolocation) {
      alert("GPS not supported");
      return;
    }

    navigator.geolocation.watchPosition(
      async (position) => {
        const lat = position.coords.latitude;
        const lng = position.coords.longitude;

        document.getElementById("status").innerText =
          "Sending: " + lat + ", " + lng;

        // ðŸ”¹ Update location in Supabase
        await supabase
          .from("ambulance_location")
          .update({
            latitude: lat,
            longitude: lng,
            updated_at: new Date()
          })
          .eq("ambulance_id", "AMB001");
      },
      () => alert("GPS permission denied"),
      { enableHighAccuracy: true }
    );
  }
</script>

</body>
</html>
